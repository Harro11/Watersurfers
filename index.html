<!DOCTYPE html>
<html>
<head>
  <title>Water Surfer Game</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js"></script>
</head>
<body>
<script>
let playerX, playerY;
let obstacles = [];
let coins = [];
let score = 0;
let speed = 5;
let gameOver = false;

function setup() {
  createCanvas(800, 600);
  playerX = width / 2;
  playerY = height - 50;
  spawnObstacles();
  spawnCoins();
}

function draw() {
  if (!gameOver) {
    background(0, 105, 148); // Water blue background
    drawPlayer();
    updateObstacles();
    updateCoins();
    drawScore();
  } else {
    background(0);
    fill(255);
    textSize(32);
    textAlign(CENTER);
    text("Game Over! Score: " + score, width / 2, height / 2);
    text("Press R to Restart", width / 2, height / 2 + 40);
  }
}

function drawPlayer() {
  fill(255, 204, 0); // Yellow jetski
  rect(playerX - 20, playerY - 20, 40, 40);
  fill(255, 0, 0); // Red player
  ellipse(playerX, playerY - 10, 20, 20);
}

function spawnObstacles() {
  setInterval(() => {
    if (!gameOver) {
      let x = random(0, width);
      obstacles.push({ x: x, y: 0 });
    }
  }, 2000);
}

function updateObstacles() {
  for (let i = obstacles.length - 1; i >= 0; i--) {
    let obs = obstacles[i];
    obs.y += speed;
    fill(255, 0, 0); // Red buoy
    ellipse(obs.x, obs.y, 30, 30);
    if (obs.y > height) {
      obstacles.splice(i, 1);
    }
    if (dist(playerX, playerY, obs.x, obs.y) < 30) {
      gameOver = true;
    }
  }
}

function spawnCoins() {
  setInterval(() => {
    if (!gameOver) {
      let x = random(0, width);
      coins.push({ x: x, y: 0 });
    }
  }, 1500);
}

function updateCoins() {
  for (let i = coins.length - 1; i >= 0; i--) {
    let coin = coins[i];
    coin.y += speed;
    fill(255, 255, 0); // Yellow coin
    ellipse(coin.x, coin.y, 20, 20);
    if (coin.y > height) {
      coins.splice(i, 1);
    }
    if (dist(playerX, playerY, coin.x, coin.y) < 20) {
      score += 10;
      coins.splice(i, 1);
    }
  }
}

function drawScore() {
  fill(255);
  textSize(20);
  textAlign(LEFT);
  text("Score: " + score, 10, 30);
}

function keyPressed() {
  if (keyCode === LEFT_ARROW && playerX > 20) {
    playerX -= 50;
  } else if (keyCode === RIGHT_ARROW && playerX < width - 20) {
    playerX += 50;
  } else if (key === 'r' && gameOver) {
    resetGame();
  }
}

function resetGame() {
  playerX = width / 2;
  playerY = height - 50;
  obstacles = [];
  coins = [];
  score = 0;
  gameOver = false;
}
</script>
</body>
</html>
